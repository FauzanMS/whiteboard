(this["webpackJsonpreact-fabricjs-whiteboard"]=this["webpackJsonpreact-fabricjs-whiteboard"]||[]).push([[0],{23:function(e,t,r){e.exports={whiteboard:"WhiteBoard_whiteboard__3PMpc",colorToolbarDiv:"WhiteBoard_colorToolbarDiv__24FsA",colorDiv:"WhiteBoard_colorDiv__244Ur",toolbar:"WhiteBoard_toolbar__3kTEu",dropdownButton:"WhiteBoard_dropdownButton__XgpWD",uploadDropdown:"WhiteBoard_uploadDropdown__1u8Bg",dropdownContent:"WhiteBoard_dropdownContent__oAziG"}},27:function(e,t,r){e.exports={pdfReader:"PdfReader_pdfReader__3P8qq",fileContainer:"PdfReader_fileContainer__2gJs-",pageInfo:"PdfReader_pageInfo__27lCr"}},40:function(e,t){},42:function(e,t,r){e.exports={app:"app_app__3mk8F"}},47:function(e,t,r){},52:function(e,t){},53:function(e,t){},54:function(e,t){},57:function(e,t){},58:function(e,t){},59:function(e,t){},60:function(e,t){},61:function(e,t){},64:function(e,t,r){"use strict";r.r(t);var o=r(1),n=r.n(o),c=r(41),a=r.n(c),i=r(11),s=r(36),u=r(21),l=r(17),d=r(38),b=r(37),f=r(27),j=r.n(f),p=r(5);b.a.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(b.a.version,"/pdf.worker.js");var g,h,E=function(e){var t=e.fileReaderInfo,r=e.updateFileReaderInfo,o=e.savePage;function n(e){r({currentPageNumber:t.currentPageNumber+e})}return Object(p.jsxs)("div",{className:j.a.pdfReader,children:[Object(p.jsx)("div",{className:j.a.fileContainer,children:Object(p.jsx)(d.a,{className:j.a.document,file:t.file,onLoadSuccess:function(e){var t=e.numPages;r({totalPages:t})},onLoadProgress:function(e){var t=e.loaded,r=e.total;return console.log("Loading a document: "+t/r*100+"%")},children:Object(p.jsx)(d.b,{className:"import-pdf-page",onRenderSuccess:function(){var e=document.querySelector(".import-pdf-page canvas").toDataURL();r({currentPage:e})},pageNumber:t.currentPageNumber})})}),Object(p.jsxs)("div",{className:j.a.pageInfo,children:[Object(p.jsxs)("span",{children:["Page ",t.currentPageNumber," of ",t.totalPages||"--"]}),Object(p.jsx)("button",{type:"button",disabled:t.currentPageNumber>=t.totalPages,onClick:function(){n(1),o()},children:"Next"})]})]})},v=(r(55),r.p+"static/media/remove.30a74efc.svg"),m=function(e){return"eraser"===e.type?v:""},O=r.p+"static/media/select.ad97be73.svg",C=r.p+"static/media/eraser.6834b010.svg",x=r.p+"static/media/text.abecf614.svg",R=r.p+"static/media/rectangle.55957e34.svg",L=r.p+"static/media/line.8231e012.svg",w=r.p+"static/media/ellipse.8c29c164.svg",N=r.p+"static/media/triangle.58a0a70e.svg",k=r.p+"static/media/pencil.eda8d85b.svg",y=r.p+"static/media/delete.f634ca67.svg",A=r(23),P=r.n(A),I=null,S=!1,T={currentMode:"",currentColor:"#000000",currentWidth:5,fill:!1,group:{}},_={RECTANGLE:"RECTANGLE",TRIANGLE:"TRIANGLE",ELLIPSE:"ELLIPSE",LINE:"LINE",PENCIL:"PENCIL",ERASER:"ERASER"};function M(e){return function(t){T.currentMode===_.ERASER&&(console.log("removed"),e.remove(t.target))}}function D(){S=!1}function W(e){e.off("mouse:down"),e.off("mouse:move"),e.off("mouse:up")}function B(e){_.currentMode!==_.LINE&&(T.currentMode=_.LINE,W(e),e.on("mouse:down",function(e){return function(t){var r=t.e;S=!0;var o=e.getPointer(r);I=new l.fabric.Line([o.x,o.y,o.x,o.y],{strokeWidth:T.currentWidth,stroke:T.currentColor,selectable:!1}),e.add(I),e.requestRenderAll()}}(e)),e.on("mouse:move",function(e){return function(t){var r=t.e;if(S){var o=e.getPointer(r);I.set({x2:o.x,y2:o.y}),I.setCoords(),e.requestRenderAll()}}}(e)),e.on("mouse:up",D),e.selection=!1,e.hoverCursor="auto",e.isDrawingMode=!1,e.getObjects().map((function(e){return e.set({selectable:!1})})),e.discardActiveObject().requestRenderAll())}function G(e){T.currentMode!==_.RECTANGLE&&(T.currentMode=_.RECTANGLE,W(e),e.on("mouse:down",function(e){return function(t){var r=t.e;S=!0;var o=e.getPointer(r);g=o.x,h=o.y,I=new l.fabric.Rect({stroke:T.currentColor,strokeWidth:T.currentWidth,fill:T.fill?T.currentColor:"transparent",left:g,top:h,width:0,height:0,selectable:!1}),e.add(I),I.on("mousedown",(function(t){T.currentMode===_.ERASER&&e.remove(t.target)}))}}(e)),e.on("mouse:move",function(e){return function(t){var r=t.e;if(S){var o=e.getPointer(r);o.x<g&&I.set("left",o.x),o.y<h&&I.set("top",o.y),I.set({width:Math.abs(o.x-g),height:Math.abs(o.y-h)}),I.setCoords(),e.renderAll()}}}(e)),e.on("mouse:up",D),e.selection=!1,e.hoverCursor="auto",e.isDrawingMode=!1,e.getObjects().map((function(e){return e.set({selectable:!1})})),e.discardActiveObject().requestRenderAll())}function q(e){T.currentMode!==_.ELLIPSE&&(T.currentMode=_.ELLIPSE,W(e),e.on("mouse:down",function(e){return function(t){var r=t.e;S=!0;var o=e.getPointer(r);g=o.x,h=o.y,I=new l.fabric.Ellipse({stroke:T.currentColor,strokeWidth:T.currentWidth,fill:T.fill?T.currentColor:"transparent",left:g,top:h,cornerSize:7,objectCaching:!1,selectable:!1}),e.add(I)}}(e)),e.on("mouse:move",function(e){return function(t){var r=t.e;if(S){var o=e.getPointer(r);o.x<g&&I.set("left",o.x),o.y<h&&I.set("top",o.y),I.set({rx:Math.abs(o.x-g)/2,ry:Math.abs(o.y-h)/2}),I.setCoords(),e.renderAll()}}}(e)),e.on("mouse:up",D),e.selection=!1,e.hoverCursor="auto",e.isDrawingMode=!1,e.getObjects().map((function(e){return e.set({selectable:!1})})),e.discardActiveObject().requestRenderAll())}function F(e){W(e),e.on("mouse:down",function(e){return function(t){var r=t.e;S=!0,T.currentMode=_.TRIANGLE;var o=e.getPointer(r);g=o.x,h=o.y,I=new l.fabric.Triangle({stroke:T.currentColor,strokeWidth:T.currentWidth,fill:T.fill?T.currentColor:"transparent",left:g,top:h,width:0,height:0,selectable:!1}),e.add(I)}}(e)),e.on("mouse:move",function(e){return function(t){var r=t.e;if(S){var o=e.getPointer(r);o.x<g&&I.set("left",o.x),o.y<h&&I.set("top",o.y),I.set({width:Math.abs(o.x-g),height:Math.abs(o.y-h)}),I.setCoords(),e.renderAll()}}}(e)),e.on("mouse:up",D),e.selection=!1,e.hoverCursor="auto",e.isDrawingMode=!1,e.getObjects().map((function(e){return e.set({selectable:!1})})),e.discardActiveObject().requestRenderAll()}function X(e){W(e),e.isDrawingMode=!1;var t=new l.fabric.Textbox("text",{left:100,top:100,fill:T.currentColor,editable:!0});e.add(t),e.renderAll()}function z(e){T.currentMode!==_.ERASER&&(W(e),e.isDrawingMode=!1,T.currentMode=_.ERASER,e.hoverCursor="url(".concat(m({type:"eraser"}),"), default"))}function U(e){T.currentMode="",e.isDrawingMode=!1,W(e),e.getObjects().map((function(e){return e.set({selectable:!0})})),e.hoverCursor="all-scroll"}function J(e){T.currentMode!==_.PENCIL&&(W(e),T.currentMode=_.PENCIL,e.freeDrawingBrush.width=parseInt(T.currentWidth,10)||1,e.freeDrawingBrush.color=T.currentColor,e.isDrawingMode=!0)}var H=function(e){var t,r,c=e.aspectRatio,a=void 0===c?4/3:c,d=e.setFiles,b=e.color,f=Object(o.useState)(null===(t=b[0])||void 0===t?void 0:t.color),j=Object(i.a)(f,2),g=j[0],h=j[1],v=Object(o.useState)(null===(r=b[0])||void 0===r?void 0:r.color),m=Object(i.a)(v,2),A=m[0],I=m[1],S=Object(o.useState)(null),D=Object(i.a)(S,2),W=D[0],H=D[1],V=Object(o.useState)(5),Y=Object(i.a)(V,2),Z=Y[0],K=Y[1],Q=Object(o.useState)({file:"",totalPages:null,currentPageNumber:1,currentPage:""}),$=Object(i.a)(Q,2),ee=$[0],te=$[1];Object(o.useEffect)((function(){T.currentColor=g}),[b]);var re=Object(o.useRef)(null),oe=Object(o.useRef)(null),ne=Object(o.useRef)(null);Object(o.useEffect)((function(){if(!W&&re.current){var e=function(e,t){var r=new l.fabric.Canvas("canvas",{height:t,width:e});return l.fabric.Object.prototype.transparentCorners=!1,l.fabric.Object.prototype.cornerStyle="circle",l.fabric.Object.prototype.borderColor="#4447A9",l.fabric.Object.prototype.cornerColor="#4447A9",l.fabric.Object.prototype.cornerSize=6,l.fabric.Object.prototype.padding=10,l.fabric.Object.prototype.borderDashArray=[5,5],r.on("object:added",(function(e){e.target.on("mousedown",M(r))})),r.on("path:created",(function(e){e.path.on("mousedown",M(r))})),r}(oe.current.clientWidth,oe.current.clientWidth/a);H((function(){return e})),(t=function(e,t){return function(){var r=e.getWidth()/e.getHeight(),o=t.clientWidth,n=o/e.getWidth(),c=e.getZoom()*n;e.setDimensions({width:o,height:o/r}),e.setViewportTransform([c,0,0,c,0,0])}}(e,oe.current),new ResizeObserver(t)).observe(oe.current)}var t}),[re]),Object(o.useEffect)((function(){if(W){var e=W.getCenter();l.fabric.Image.fromURL(ee.currentPage,(function(t){t.scaleToHeight(W.height),W.setBackgroundImage(t,W.renderAll.bind(W),{top:e.top,left:e.left,originX:"center",originY:"center"}),W.renderAll()}))}}),[ee.currentPage]);var ce=Object(o.useState)([]),ae=Object(i.a)(ce,2),ie=ae[0],se=ae[1],ue=Object(o.useState)([]),le=Object(i.a)(ue,2),de=le[0],be=le[1];function fe(e){be([].concat(Object(u.a)(de),[re])),re.current.toBlob((function(t){se([].concat(Object(u.a)(ie),[t])),e.getObjects().forEach((function(t){t!==e.backgroundImage&&e.remove(t)}))}))}var je=n.a.useState(!1),pe=Object(i.a)(je,2),ge=pe[0],he=pe[1];function Ee(e){te(Object(s.a)(Object(s.a)({},ee),e))}var ve=function(e,t,r){switch(e){case _.LINE:B(t),I(_.LINE);break;case _.RECTANGLE:G(t),I(_.RECTANGLE);break;case _.ELLIPSE:q(t),I(_.ELLIPSE);break;case _.TRIANGLE:F(t),I(_.TRIANGLE);break;case _.PENCIL:J(t),I(_.PENCIL);break;case"TEXT":X(t),I("TEXT");break;case"SELECT":U(t),I("SELECT");break;case _.ERASER:z(t),I(_.ERASER);break;case"CLEAR":!function(e){e.getObjects().forEach((function(t){t!==e.backgroundImage&&e.remove(t)}))}(t),I("CLEAR")}};return Object(p.jsxs)("div",{ref:oe,className:P.a.whiteboard,children:[Object(p.jsxs)("div",{className:P.a.toolbar,children:[Object(p.jsx)("button",{type:"button",style:{backgroundColor:A===_.LINE&&"white",border:A===_.LINE&&"1px solid ".concat(g)},onClick:function(){return ve(_.LINE,W)},children:Object(p.jsx)("img",{src:L,alt:"line"})}),Object(p.jsx)("button",{type:"button",style:{backgroundColor:A===_.RECTANGLE&&"white",border:A===_.RECTANGLE&&"1px solid ".concat(g)},onClick:function(){return ve(_.RECTANGLE,W)},children:Object(p.jsx)("img",{src:R,alt:"Rectangle"})}),Object(p.jsx)("button",{type:"button",style:{backgroundColor:A===_.ELLIPSE&&"white",border:A===_.ELLIPSE&&"1px solid ".concat(g)},onClick:function(){return ve(_.ELLIPSE,W)},children:Object(p.jsx)("img",{src:w,alt:"Ellipse"})}),Object(p.jsx)("button",{type:"button",style:{backgroundColor:A===_.TRIANGLE&&"white",border:A===_.TRIANGLE&&"1px solid ".concat(g)},onClick:function(){return ve(_.TRIANGLE,W)},children:Object(p.jsx)("img",{src:N,alt:"Triangle"})}),Object(p.jsx)("button",{type:"button",style:{backgroundColor:A===_.PENCIL&&"white",border:A===_.PENCIL&&"1px solid ".concat(g)},onClick:function(){return ve(_.PENCIL,W)},children:Object(p.jsx)("img",{src:k,alt:"Pencil"})}),Object(p.jsx)("button",{type:"button",style:{backgroundColor:"TEXT"===A&&"white",border:"TEXT"===A&&"1px solid ".concat(g)},onClick:function(){return ve("TEXT",W)},children:Object(p.jsx)("img",{src:x,alt:"Text"})}),Object(p.jsx)("button",{type:"button",style:{backgroundColor:"SELECT"===A&&"white",border:"SELECT"===A&&"1px solid ".concat(g)},onClick:function(){return ve("SELECT",W)},children:Object(p.jsx)("img",{src:O,alt:"Selection mode"})}),Object(p.jsx)("button",{type:"button",style:{backgroundColor:A===_.ERASER&&"white",border:A===_.ERASER&&"1px solid ".concat(g)},onClick:function(){return ve(_.ERASER,W)},children:Object(p.jsx)("img",{src:C,alt:"Eraser"})}),Object(p.jsx)("button",{type:"button",style:{backgroundColor:"CLEAR"===A&&"white",border:"CLEAR"===A&&"1px solid ".concat(g)},onClick:function(){return ve("CLEAR",W)},children:Object(p.jsx)("img",{src:y,alt:"Delete"})}),Object(p.jsx)("input",{type:"range",min:1,max:20,step:1,value:Z,onChange:function(e){var t=parseInt(e.target.value);T.currentWidth=t,W.freeDrawingBrush.width=t,K((function(){return t}))}}),Object(p.jsxs)("div",{className:P.a.uploadDropdown,children:[Object(p.jsx)("input",{ref:ne,accept:".pdf",type:"file",onChange:function(e){Ee({file:e.target.files[0],currentPageNumber:1})}}),Object(p.jsx)("button",{className:P.a.dropdownButton,children:"+Upload"}),Object(p.jsx)("div",{className:P.a.dropdownContent,children:Object(p.jsx)("span",{onClick:function(){ne.current.click(),he(!0)},children:"PDF"})})]}),Object(p.jsx)("button",{onClick:function(){re.current.toBlob((function(e){d([].concat(Object(u.a)(ie),[e])),se([].concat(Object(u.a)(ie),[e]))})),W.getObjects().forEach((function(e){e!==W.backgroundImage&&W.remove(e)})),se([]),Ee({file:"",currentPageNumber:1})},children:"Submit"})]}),Object(p.jsx)("div",{className:P.a.colorToolbarDiv,children:b.map((function(e){return Object(p.jsx)("div",{onClick:function(){return t=e.color,T.currentColor=t,W.freeDrawingBrush.color=t,void h(t);var t},style:{backgroundColor:"".concat(e.color),boxShadow:g===e.color&&"0 0 10px black"},title:e.title,className:P.a.colorDiv},e.color)}))}),Object(p.jsx)("canvas",{ref:re,id:"canvas"}),Object(p.jsx)("div",{children:!ge&&Object(p.jsx)("button",{onClick:function(){return fe(W)},children:"Next"})}),Object(p.jsx)("div",{children:ge&&Object(p.jsx)(E,{savePage:function(){return fe(W)},fileReaderInfo:ee,updateFileReaderInfo:Ee})})]})},V=r(42),Y=r.n(V),Z=function(){var e=n.a.useState([]),t=Object(i.a)(e,2),r=(t[0],t[1]);return Object(p.jsx)("div",{className:Y.a.app,children:Object(p.jsx)("main",{children:Object(p.jsx)(H,{aspectRatio:4/3,setFiles:r,color:[{title:"red",color:"#ff0019"},{title:"yellow",color:"#ffc400"},{title:"black",color:"#000000"},{title:"green",color:"#59ff0d"},{title:"pink",color:"#f700ff"},{title:"purple",color:"#8000ff"},{title:"cyan",color:"#00c9c3"},{title:"blue",color:"#021ff7"}]})})})};r(47);a.a.render(Object(p.jsx)(Z,{}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.cb108896.chunk.js.map